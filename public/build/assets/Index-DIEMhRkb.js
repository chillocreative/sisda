import{a as I,r as j,u as E,j as e,H as M,b as d}from"./app-Bgx-lxCY.js";import{A,c as F,X as b}from"./AuthenticatedLayout-CY713wm8.js";import{M as H}from"./Modal-CA7UuIyf.js";import{S as K}from"./SecondaryButton-9EcfAwLK.js";import{u as L}from"./useDragScroll-Cbhfegtg.js";import{D as U}from"./download-DAnpQdMp.js";import{P as B,S as R}from"./square-pen-DtvC5WaC.js";import{F as $}from"./funnel-CzB0lOGI.js";import{S as O}from"./search-CslUE6Bx.js";import{C as N}from"./calendar-E-cIY2KO.js";import{T as f}from"./trash-2-CHsFsheU.js";import{E as q}from"./eye-CfRRZjTw.js";import"./createLucideIcon-BmO_utIB.js";import"./phone-Ldc3Gl8C.js";import"./transition-4sHt-qMt.js";import"./with-selector-D_2DZugY.js";import"./index-JQYtirWw.js";function ce({dataPengundi:a,filters:p,currentUserId:J}){const{auth:v}=I().props,r=v.user,[l,i]=j.useState([]),[o,g]=j.useState(!1),[t,c]=j.useState(null),y=L(),u=s=>r.role==="super_admin"?!0:r.role==="admin"?s.bandar===r.bandar?.nama:r.role==="user"?s.submitted_by?.id===r.id&&s.kadun===r.kadun?.nama:!1,m=a.data.filter(u),{data:n,setData:h,get:k,processing:w}=E({search:p.search||"",date_from:p.date_from||"",date_to:p.date_to||""}),_=s=>{s.preventDefault(),k(route("reports.data-pengundi.index"),{preserveState:!0,preserveScroll:!0})},C=()=>{const s=new URLSearchParams({search:n.search,date_from:n.date_from,date_to:n.date_to}).toString();window.location.href=route("reports.data-pengundi.export")+"?"+s},S=s=>{s.target.checked?i(m.map(x=>x.id)):i([])},D=s=>{l.includes(s)?i(l.filter(x=>x!==s)):i([...l,s])},T=s=>{confirm("Adakah anda pasti mahu memadam rekod ini?")&&d.delete(route("reports.data-pengundi.destroy",s))},P=s=>new Date(s).toLocaleDateString("ms-MY",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"});return e.jsxs(A,{children:[e.jsx(M,{title:"Data Pengundi"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Data Pengundi"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Jumlah: ",a.total," rekod"]})]}),e.jsxs("div",{className:"flex items-center space-x-3",children:[e.jsxs("button",{onClick:C,className:"flex items-center space-x-2 px-4 py-2 bg-emerald-600 text-white rounded-lg hover:bg-emerald-700 transition-colors",children:[e.jsx(U,{className:"h-4 w-4"}),e.jsx("span",{children:"Export Excel"})]}),e.jsxs("button",{onClick:()=>d.visit(route("reports.data-pengundi.create")),className:"flex items-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(B,{className:"h-4 w-4"}),e.jsx("span",{children:"Tambah Baru"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsxs("h3",{className:"font-semibold text-slate-900 flex items-center space-x-2",children:[e.jsx($,{className:"h-5 w-5"}),e.jsx("span",{children:"Penapis"})]}),e.jsxs("button",{onClick:()=>g(!o),className:"text-sm text-slate-600 hover:text-slate-900 flex items-center space-x-1",children:[e.jsx("span",{children:o?"Sembunyikan":"Tunjukkan"}),e.jsx(F,{className:`h-4 w-4 transition-transform ${o?"rotate-180":""}`})]})]}),o&&e.jsxs("form",{onSubmit:_,className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Carian"}),e.jsxs("div",{className:"relative",children:[e.jsx(O,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",value:n.search,onChange:s=>h("search",s.target.value),placeholder:"Nama, No. IC, No. Tel",className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tarikh Dari"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"date",value:n.date_from,onChange:s=>h("date_from",s.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400"})]})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Tarikh Hingga"}),e.jsxs("div",{className:"relative",children:[e.jsx(N,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"date",value:n.date_to,onChange:s=>h("date_to",s.target.value),className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400"})]})]}),e.jsxs("div",{className:"flex items-end space-x-2",children:[e.jsx("button",{type:"submit",disabled:w,className:"flex-1 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:"Tapis"}),e.jsx("button",{type:"button",onClick:()=>{h({search:"",date_from:"",date_to:""}),d.visit(route("reports.data-pengundi.index"))},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Reset"})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{ref:y,className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 w-12",children:e.jsx("input",{type:"checkbox",checked:m.length>0&&m.every(s=>l.includes(s.id)),onChange:S,className:"rounded border-slate-300 disabled:opacity-50",disabled:m.length===0})}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Nama"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"No. IC"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Umur"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"No. Tel"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Bangsa"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Hubungan"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Negeri"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Parlimen"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"KADUN"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Lokaliti"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Keahlian Parti"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Tarikh"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Dikemukakan"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Tindakan"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:a.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"15",className:"py-8 text-center text-slate-500",children:"Tiada rekod dijumpai"})}):a.data.map(s=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:u(s)&&e.jsx("input",{type:"checkbox",checked:l.includes(s.id),onChange:()=>D(s.id),className:"rounded border-slate-300"})}),e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-slate-900",children:e.jsx("button",{onClick:()=>c(s),className:"hover:text-sky-600 hover:underline text-left",children:s.nama})}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.no_ic}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.umur}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.no_tel}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.bangsa}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.hubungan||"-"}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.negeri}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.parlimen}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.kadun}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.lokaliti||"â€”"}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.keahlian_parti||"-"}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:P(s.created_at)}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.submitted_by?.name||"-"}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("div",{className:"flex items-center justify-end space-x-2",children:u(s)?e.jsxs(e.Fragment,{children:[e.jsx("button",{onClick:()=>d.visit(route("reports.data-pengundi.edit",s.id)),className:"p-2 text-slate-600 hover:text-sky-600 hover:bg-sky-50 rounded-lg transition-colors",title:"Edit",children:e.jsx(R,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>T(s.id),className:"p-2 text-slate-600 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",title:"Padam",children:e.jsx(f,{className:"h-4 w-4"})})]}):e.jsx("button",{onClick:()=>c(s),className:"p-2 text-slate-600 hover:text-sky-600 hover:bg-sky-50 rounded-lg transition-colors",title:"Lihat",children:e.jsx(q,{className:"h-4 w-4"})})})})]},s.id))})]})}),a.links&&a.links.length>3&&e.jsx("div",{className:"border-t border-slate-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Menunjukkan ",a.from," hingga ",a.to," daripada ",a.total," rekod"]}),e.jsx("div",{className:"flex items-center space-x-2",children:a.links.map((s,x)=>e.jsx("button",{onClick:()=>s.url&&d.visit(s.url),disabled:!s.url,className:`px-3 py-1 rounded-lg text-sm transition-colors ${s.active?"bg-slate-900 text-white":s.url?"bg-slate-100 text-slate-700 hover:bg-slate-200":"bg-slate-50 text-slate-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},x))})]})})]}),l.length>0&&e.jsxs("div",{className:"fixed bottom-6 left-1/2 -translate-x-1/2 bg-slate-900 text-white rounded-xl shadow-xl px-6 py-4 flex items-center space-x-4",children:[e.jsxs("span",{className:"text-sm font-medium",children:[l.length," item dipilih"]}),e.jsxs("button",{onClick:()=>{confirm(`Padam ${l.length} item?`)&&d.post(route("reports.data-pengundi.bulk-delete"),{ids:l})},className:"flex items-center space-x-2 px-4 py-2 bg-rose-600 rounded-lg hover:bg-rose-700 transition-colors",children:[e.jsx(f,{className:"h-4 w-4"}),e.jsx("span",{children:"Padam Semua"})]}),e.jsx("button",{onClick:()=>i([]),className:"p-2 hover:bg-slate-800 rounded-lg transition-colors",children:e.jsx(b,{className:"h-4 w-4"})})]})]}),e.jsx(H,{show:!!t,onClose:()=>c(null),children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-lg font-medium text-slate-900",children:"Maklumat Pengundi"}),e.jsx("button",{onClick:()=>c(null),className:"text-slate-400 hover:text-slate-500",children:e.jsx(b,{className:"h-5 w-5"})})]}),t&&e.jsxs("div",{className:"space-y-6 max-h-[70vh] overflow-y-auto pr-2",children:[e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Nama"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.nama})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"No. Kad Pengenalan"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.no_ic})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Umur"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.umur})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"No. Telefon"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.no_tel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Bangsa"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.bangsa})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Hubungan"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.hubungan||"-"})]}),e.jsxs("div",{className:"md:col-span-2",children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Alamat"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.alamat})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Poskod"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.poskod})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Bandar"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.bandar})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Negeri"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.negeri})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Parlimen"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.parlimen})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"KADUN"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.kadun})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Pusat Mengundi"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.pusat_mengundi||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Saluran"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.saluran||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Keahlian Parti"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.keahlian_parti||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Kecenderungan Politik"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.kecenderungan_politik||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Nota"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.nota||"-"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-500",children:"Dikemukakan Oleh"}),e.jsx("div",{className:"mt-1 text-slate-900",children:t.submitted_by?.name||"-"})]})]}),e.jsx("div",{className:"flex justify-end pt-6 border-t border-slate-100",children:e.jsx(K,{onClick:()=>c(null),children:"Tutup"})})]})]})})]})}export{ce as default};
