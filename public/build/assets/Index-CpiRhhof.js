import{r as o,u as S,j as e,H as W,a as c,c as X}from"./app-oWYwsgPA.js";import{A as $,T as J,X as C}from"./AuthenticatedLayout-CcLVzMtM.js";import{u as Q,a as A,D as Y,c as Z,S as ee,v as se,b as te,s as ae,K as re,P as le,d as ne}from"./SortableTableRow-B8_28742.js";import{P as oe,T as de}from"./trash-2-DZVD8626.js";import{S as ie}from"./search-DwPMLRVM.js";import{G as ce}from"./grip-vertical-DS03UA3O.js";import{C as xe}from"./check-CmjL0pZo.js";import{S as me}from"./square-pen-BMmzh2ai.js";import"./createLucideIcon-DeOx7ZWC.js";import"./phone-CceSVOJV.js";import"./index-Dr3TSQJm.js";function Se({kecenderunganPolitik:t,filters:D}){const[x,p]=o.useState(D.search||""),[b,m]=o.useState(null),[k,d]=o.useState(!1),[u,j]=o.useState(t.data);o.useEffect(()=>{j(t.data)},[t.data]);const{data:K,setData:E,post:I,processing:g,errors:f,reset:h}=S({nama:""}),{data:T,setData:N,put:P,processing:M,errors:v,reset:y}=S({nama:""}),H=Q(A(le),A(re,{coordinateGetter:ae})),R=s=>{const{active:a,over:i}=s;a.id!==i.id&&j(l=>{const n=l.findIndex(r=>r.id===a.id),O=l.findIndex(r=>r.id===i.id),w=ne(l,n,O),q=t.from||1,z=w.map((r,V)=>({id:r.id,sort_order:q+V}));return X.post(route("master-data.reorder"),{model:"KecenderunganPolitik",items:z}).catch(r=>{console.error("Reorder failed",r)}),w})},_=s=>{s.preventDefault(),c.get(route("master-data.kecenderungan-politik.index"),{search:x},{preserveState:!0,preserveScroll:!0})},F=s=>{s.preventDefault(),I(route("master-data.kecenderungan-politik.store"),{onSuccess:()=>{h(),d(!1)}})},B=s=>{m(s.id),N({nama:s.nama})},G=(s,a)=>{s.preventDefault(),P(route("master-data.kecenderungan-politik.update",a),{onSuccess:()=>{y(),m(null)}})},L=s=>{confirm("Adakah anda pasti mahu memadam Kecenderungan Politik ini?")&&c.delete(route("master-data.kecenderungan-politik.destroy",s))},U=()=>{m(null),y()};return e.jsxs($,{children:[e.jsx(W,{title:"Kecenderungan Politik"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Kecenderungan Politik"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Urus senarai kecenderungan politik"})]}),e.jsxs("button",{onClick:()=>d(!0),className:"flex items-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(oe,{className:"h-4 w-4"}),e.jsx("span",{children:"Tambah Kecenderungan"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:e.jsxs("form",{onSubmit:_,className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(ie,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",value:x,onChange:s=>p(s.target.value),placeholder:"Cari Kecenderungan Politik...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400"})]}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:"Cari"}),x&&e.jsx("button",{type:"button",onClick:()=>{p(""),c.get(route("master-data.kecenderungan-politik.index"))},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Reset"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsx(Y,{sensors:H,collisionDetection:Z,onDragEnd:R,children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"w-10"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase w-16",children:"#"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Nama"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 uppercase w-32",children:"Action"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:e.jsx(ee,{items:u,strategy:se,children:u.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"4",className:"py-8 text-center text-slate-500",children:"Tiada rekod dijumpai"})}):u.map((s,a)=>e.jsx(te,{id:s.id,className:"hover:bg-slate-50 transition-colors",children:(i,l)=>e.jsxs(e.Fragment,{children:[e.jsx("td",{className:"py-3 px-4 w-10",children:e.jsx("button",{...i,...l,className:"p-1 text-slate-400 hover:text-slate-600 cursor-grab active:cursor-grabbing",children:e.jsx(ce,{className:"h-4 w-4"})})}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:(t.from||1)+a}),e.jsx("td",{className:"py-3 px-4",children:b===s.id?e.jsxs("div",{className:"space-y-1",children:[e.jsx("input",{type:"text",value:T.nama,onChange:n=>N("nama",n.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",autoFocus:!0}),v.nama&&e.jsx("p",{className:"text-sm text-rose-600",children:v.nama})]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(J,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.nama})]})}),e.jsx("td",{className:"py-3 px-4",children:b===s.id?e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:n=>G(n,s.id),disabled:M,className:"p-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors disabled:opacity-50",title:"Simpan",children:e.jsx(xe,{className:"h-4 w-4"})}),e.jsx("button",{onClick:U,className:"p-2 bg-slate-200 text-slate-600 rounded-lg hover:bg-slate-300 transition-colors",title:"Batal",children:e.jsx(C,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>B(s),className:"p-2 bg-amber-400 text-white rounded-lg hover:bg-amber-500 transition-colors",title:"Kemaskini",children:e.jsx(me,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>L(s.id),className:"p-2 bg-rose-500 text-white rounded-lg hover:bg-rose-600 transition-colors",title:"Padam",children:e.jsx(de,{className:"h-4 w-4"})})]})})]})},s.id))})})]})})}),t.last_page>1&&e.jsxs("div",{className:"border-t border-slate-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Menunjukkan ",t.from," hingga ",t.to," daripada ",t.total," rekod"]}),e.jsx("div",{className:"flex items-center space-x-2",children:t.links.map((s,a)=>e.jsx("button",{onClick:()=>s.url&&c.get(s.url),disabled:!s.url,className:`px-3 py-1 rounded-lg text-sm transition-colors ${s.active?"bg-slate-900 text-white":s.url?"border border-slate-300 text-slate-700 hover:bg-slate-50":"border border-slate-200 text-slate-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},a))})]})]})]}),k&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Tambah Kecenderungan Politik"}),e.jsx("button",{onClick:()=>{d(!1),h()},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(C,{className:"h-5 w-5 text-slate-600"})})]}),e.jsxs("form",{onSubmit:F,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Nama Kecenderungan ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:K.nama,onChange:s=>E("nama",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",placeholder:"Contoh: PAKATAN HARAPAN (PH/BN)",autoFocus:!0}),f.nama&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:f.nama})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{d(!1),h()},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:g?"Menyimpan...":"Simpan"})]})]})]})})]})}export{Se as default};
