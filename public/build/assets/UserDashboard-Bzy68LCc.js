import{r as a,c as v,j as e,H as g,a as i}from"./app-B2jPE0RG.js";import{A as w,d as y,e as k,X as S}from"./AuthenticatedLayout-CqjbtEEH.js";import{S as C}from"./search-4OErnYrk.js";import{S as R}from"./square-pen-DyrSAaNB.js";import{E as _}from"./eye-Cm4FxhpQ.js";import"./createLucideIcon-DH7GAbzM.js";import"./phone-D_UhCvYJ.js";function H(){const[l,b]=a.useState(""),[d,o]=a.useState([]),[c,m]=a.useState(!1),[x,r]=a.useState(!1),[t,p]=a.useState(null),[j,h]=a.useState(!1),n=a.useRef(null);a.useEffect(()=>{function s(u){n.current&&!n.current.contains(u.target)&&r(!1)}return document.addEventListener("mousedown",s),()=>document.removeEventListener("mousedown",s)},[]),a.useEffect(()=>{const s=setTimeout(()=>{l.length>=3?f():(o([]),r(!1))},300);return()=>clearTimeout(s)},[l]);const f=async()=>{m(!0);try{const s=await v.get(route("dashboard.search-ic"),{params:{ic:l}});o(s.data),r(!0)}catch(s){console.error("Search error:",s)}finally{m(!1)}},N=s=>{s.can_edit?i.visit(s.edit_url):(p(s),h(!0),r(!1))};return e.jsxs(w,{children:[e.jsx(g,{title:"Dashboard"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[e.jsxs("div",{className:"text-center",children:[e.jsx("h1",{className:"text-3xl font-bold text-slate-900",children:"Selamat Datang ke SISDA"}),e.jsx("p",{className:"text-slate-600 mt-2",children:"Sistem Maklumat Sumber Data"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-8 shadow-sm",children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-4",children:"Carian No. Kad Pengenalan"}),e.jsxs("div",{className:"relative",ref:n,children:[e.jsxs("div",{className:"relative",children:[e.jsx(C,{className:"absolute left-4 top-1/2 -translate-y-1/2 h-5 w-5 text-slate-400"}),e.jsx("input",{type:"text",value:l,onChange:s=>b(s.target.value),placeholder:"Masukkan No Kad Pengenalan",className:"w-full pl-14 pr-4 py-4 text-lg border-2 border-slate-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 transition-all"}),c&&e.jsx("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:e.jsx("div",{className:"animate-spin h-5 w-5 border-2 border-blue-500 border-t-transparent rounded-full"})})]}),x&&d.length>0&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-slate-200 rounded-lg shadow-xl max-h-96 overflow-y-auto",children:d.map((s,u)=>e.jsx("button",{onClick:()=>N(s),className:"w-full px-6 py-4 text-left hover:bg-slate-50 border-b border-slate-100 last:border-b-0 transition-colors",children:e.jsxs("div",{className:"flex items-start justify-between",children:[e.jsxs("div",{className:"flex-1",children:[e.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[e.jsx("span",{className:"font-semibold text-slate-900",children:s.nama}),e.jsx("span",{className:`px-2 py-0.5 text-xs font-medium rounded ${s.type==="hasil_culaan"?"bg-emerald-100 text-emerald-700":"bg-sky-100 text-sky-700"}`,children:s.type==="hasil_culaan"?"Hasil Culaan":"Data Pengundi"})]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["No. IC: ",s.no_ic]}),e.jsxs("p",{className:"text-sm text-slate-600",children:["Tel: ",s.no_tel]}),e.jsxs("p",{className:"text-xs text-slate-500 mt-1",children:[s.kadun,", ",s.bandar]})]}),e.jsx("div",{className:"ml-4",children:s.can_edit?e.jsx(R,{className:"h-5 w-5 text-blue-600"}):e.jsx(_,{className:"h-5 w-5 text-slate-400"})})]})},`${s.type}-${s.id}`))}),x&&d.length===0&&l.length>=3&&!c&&e.jsx("div",{className:"absolute z-10 w-full mt-2 bg-white border-2 border-slate-200 rounded-lg shadow-xl p-6 text-center",children:e.jsx("p",{className:"text-slate-600",children:"Tiada rekod dijumpai"})})]})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-xl font-semibold text-slate-900 mb-6 text-center",children:"Tindakan Pantas"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-8",children:[e.jsxs("button",{onClick:()=>i.visit(route("reports.hasil-culaan.create")),className:"group relative bg-gradient-to-br from-emerald-500 via-emerald-600 to-emerald-700 hover:from-emerald-600 hover:via-emerald-700 hover:to-emerald-800 text-white rounded-2xl p-12 transition-all duration-300 hover:shadow-2xl hover:shadow-emerald-500/50 hover:-translate-y-2 border-2 border-emerald-400/50",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-2xl"}),e.jsxs("div",{className:"relative flex flex-col items-center text-center space-y-6",children:[e.jsx("div",{className:"p-6 bg-white/30 backdrop-blur-sm rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(y,{className:"h-16 w-16",strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 drop-shadow-lg",children:"Mula Culaan"}),e.jsx("p",{className:"text-lg text-emerald-50 font-medium",children:"Tambah data hasil culaan baru"})]}),e.jsx("div",{className:"mt-4 px-6 py-2 bg-white/20 backdrop-blur-sm rounded-full",children:e.jsx("span",{className:"text-sm font-semibold",children:"Klik untuk mula"})})]})]}),e.jsxs("button",{onClick:()=>i.visit(route("reports.data-pengundi.create")),className:"group relative bg-gradient-to-br from-sky-500 via-sky-600 to-sky-700 hover:from-sky-600 hover:via-sky-700 hover:to-sky-800 text-white rounded-2xl p-12 transition-all duration-300 hover:shadow-2xl hover:shadow-sky-500/50 hover:-translate-y-2 border-2 border-sky-400/50",children:[e.jsx("div",{className:"absolute inset-0 bg-gradient-to-br from-white/20 to-transparent rounded-2xl"}),e.jsxs("div",{className:"relative flex flex-col items-center text-center space-y-6",children:[e.jsx("div",{className:"p-6 bg-white/30 backdrop-blur-sm rounded-2xl shadow-lg group-hover:scale-110 transition-transform duration-300",children:e.jsx(k,{className:"h-16 w-16",strokeWidth:2.5})}),e.jsxs("div",{children:[e.jsx("h3",{className:"text-3xl font-bold mb-3 drop-shadow-lg",children:"Data Pengundi"}),e.jsx("p",{className:"text-lg text-sky-50 font-medium",children:"Tambah data pengundi baru"})]}),e.jsx("div",{className:"mt-4 px-6 py-2 bg-white/20 backdrop-blur-sm rounded-full",children:e.jsx("span",{className:"text-sm font-semibold",children:"Klik untuk mula"})})]})]})]})]})]}),j&&t&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[e.jsxs("div",{className:"sticky top-0 bg-white border-b border-slate-200 px-6 py-4 flex items-center justify-between",children:[e.jsx("h3",{className:"text-xl font-semibold text-slate-900",children:"Maklumat Rekod"}),e.jsx("button",{onClick:()=>h(!1),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(S,{className:"h-5 w-5"})})]}),e.jsxs("div",{className:"p-6 space-y-4",children:[e.jsx("div",{className:"bg-amber-50 border border-amber-200 rounded-lg p-4 mb-4",children:e.jsxs("p",{className:"text-sm text-amber-800",children:[e.jsx("strong",{children:"Nota:"})," Anda hanya boleh melihat rekod ini. Anda tidak mempunyai kebenaran untuk mengedit."]})}),e.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Jenis"}),e.jsx("p",{className:"text-slate-900",children:t.type==="hasil_culaan"?"Hasil Culaan":"Data Pengundi"})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"No. IC"}),e.jsx("p",{className:"text-slate-900",children:t.no_ic})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Nama"}),e.jsx("p",{className:"text-slate-900",children:t.nama})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"No. Telefon"}),e.jsx("p",{className:"text-slate-900",children:t.no_tel})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"Bandar"}),e.jsx("p",{className:"text-slate-900",children:t.bandar})]}),e.jsxs("div",{children:[e.jsx("label",{className:"text-sm font-medium text-slate-600",children:"KADUN"}),e.jsx("p",{className:"text-slate-900",children:t.kadun})]})]})]})]})})]})}export{H as default};
