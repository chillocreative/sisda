import{r as x,u as f,j as e,H as B,b as r}from"./app-B2oWfsIg.js";import{A as P,X as I}from"./AuthenticatedLayout-DKBr3Dsa.js";import{P as _,S as F}from"./square-pen-Dq5-kSm_.js";import{S as H}from"./search-DgwEUNV5.js";import{T as U}from"./trash-2-Bmx22OVy.js";import"./createLucideIcon-DO_NnYHa.js";import"./phone-BtrsRlbF.js";function $({lokaliti:s,filters:g}){const[o,m]=x.useState(g.search||""),[d,n]=x.useState(null),[N,l]=x.useState(!1),{data:v,setData:y,post:w,processing:u,errors:h,reset:i}=f({nama:""}),{data:k,setData:p,put:S,processing:C,errors:b,reset:j}=f({nama:""}),D=t=>{t.preventDefault(),r.get(route("master-data.lokaliti.index"),{search:o},{preserveState:!0,preserveScroll:!0})},A=t=>{t.preventDefault(),w(route("master-data.lokaliti.store"),{onSuccess:()=>{i(),l(!1)}})},E=t=>{n(t.id),p("nama",t.nama)},L=(t,a)=>{t.preventDefault(),S(route("master-data.lokaliti.update",a),{onSuccess:()=>{j(),n(null)}})},M=t=>{confirm("Adakah anda pasti mahu memadam lokaliti ini?")&&r.delete(route("master-data.lokaliti.destroy",t))},T=()=>{n(null),j()};return e.jsxs(P,{children:[e.jsx(B,{title:"Lokaliti"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Lokaliti"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Urus senarai lokaliti kawasan P041-Kepala Batas"})]}),e.jsxs("button",{onClick:()=>l(!0),className:"flex items-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(_,{className:"h-4 w-4"}),e.jsx("span",{children:"Tambah Lokaliti"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:e.jsxs("form",{onSubmit:D,className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(H,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",value:o,onChange:t=>m(t.target.value),placeholder:"Cari lokaliti...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400"})]}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:"Cari"}),o&&e.jsx("button",{type:"button",onClick:()=>{m(""),r.get(route("master-data.lokaliti.index"))},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Reset"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase w-16",children:"Bil"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Nama Lokaliti"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 uppercase w-32",children:"Tindakan"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:s.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"3",className:"py-8 text-center text-slate-500",children:"Tiada rekod dijumpai"})}):s.data.map((t,a)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.from+a}),e.jsxs("td",{className:"py-3 px-4",children:[d===t.id?e.jsxs("form",{onSubmit:c=>L(c,t.id),className:"flex items-center space-x-2",children:[e.jsx("input",{type:"text",value:k.nama,onChange:c=>p("nama",c.target.value),className:"flex-1 px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",autoFocus:!0}),e.jsx("button",{type:"submit",disabled:C,className:"px-3 py-1.5 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:"Simpan"}),e.jsx("button",{type:"button",onClick:T,className:"px-3 py-1.5 border border-slate-300 text-slate-700 text-sm rounded-lg hover:bg-slate-50 transition-colors",children:"Batal"})]}):e.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.nama}),b.nama&&d===t.id&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:b.nama})]}),e.jsx("td",{className:"py-3 px-4",children:d!==t.id&&e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>E(t),className:"p-2 text-slate-600 hover:text-sky-600 hover:bg-sky-50 rounded-lg transition-colors",children:e.jsx(F,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>M(t.id),className:"p-2 text-slate-600 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",children:e.jsx(U,{className:"h-4 w-4"})})]})})]},t.id))})]})}),s.last_page>1&&e.jsxs("div",{className:"border-t border-slate-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Menunjukkan ",s.from," hingga ",s.to," daripada ",s.total," rekod"]}),e.jsx("div",{className:"flex items-center space-x-2",children:s.links.map((t,a)=>e.jsx("button",{onClick:()=>t.url&&r.get(t.url),disabled:!t.url,className:`px-3 py-1 rounded-lg text-sm transition-colors ${t.active?"bg-slate-900 text-white":t.url?"border border-slate-300 text-slate-700 hover:bg-slate-50":"border border-slate-200 text-slate-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},a))})]})]})]}),N&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Tambah Lokaliti"}),e.jsx("button",{onClick:()=>{l(!1),i()},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(I,{className:"h-5 w-5 text-slate-600"})})]}),e.jsxs("form",{onSubmit:A,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Nama Lokaliti ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:v.nama,onChange:t=>y("nama",t.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",placeholder:"Contoh: BUMBONG LIMA MK 2",autoFocus:!0}),h.nama&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:h.nama})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{l(!1),i()},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:u,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:u?"Menyimpan...":"Simpan"})]})]})]})})]})}export{$ as default};
