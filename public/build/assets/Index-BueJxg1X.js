import{r as m,u as D,j as e,H as M,b as n}from"./app-Bgx-lxCY.js";import{A as T,b as N,X as A}from"./AuthenticatedLayout-CY713wm8.js";import{M as E}from"./Modal-CA7UuIyf.js";import{P,S as I}from"./square-pen-DtvC5WaC.js";import{S as R}from"./search-CslUE6Bx.js";import{T as q}from"./trash-2-CHsFsheU.js";import"./createLucideIcon-BmO_utIB.js";import"./phone-Ldc3Gl8C.js";import"./transition-4sHt-qMt.js";import"./with-selector-D_2DZugY.js";import"./index-JQYtirWw.js";function O({daerahMengundi:t,filters:d,auth:H}){const[h,u]=m.useState(d.search||""),[g,o]=m.useState(!1),[l,i]=m.useState(null),{data:p,setData:c,post:v,put:y,processing:b,errors:r,reset:j}=D({kod_dm:"",nama:"",bandar_id:""}),k=s=>{s.preventDefault(),n.get(route("master-data.daerah-mengundi.index"),{search:h},{preserveState:!0,preserveScroll:!0})},f=()=>{u(""),n.get(route("master-data.daerah-mengundi.index"))},w=()=>{j(),i(null),o(!0)},S=s=>{i(s),c({kod_dm:s.kod_dm,nama:s.nama,bandar_id:s.bandar_id}),o(!0)},a=()=>{o(!1),i(null),j()},C=s=>{s.preventDefault(),l?y(route("master-data.daerah-mengundi.update",l.id),{onSuccess:()=>a()}):v(route("master-data.daerah-mengundi.store"),{onSuccess:()=>a()})},_=s=>{confirm("Adakah anda pasti untuk memadam daerah mengundi ini?")&&n.delete(route("master-data.daerah-mengundi.destroy",s))};return e.jsxs(T,{children:[e.jsx(M,{title:"Daerah Mengundi"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Daerah Mengundi"}),e.jsxs("p",{className:"text-sm text-slate-600 mt-1",children:["Jumlah: ",t.total," daerah mengundi"]})]}),e.jsxs("button",{onClick:w,className:"flex items-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:"Tambah Daerah Mengundi"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:e.jsxs("form",{onSubmit:k,className:"flex items-center space-x-4",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx(R,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",value:h,onChange:s=>u(s.target.value),placeholder:"Cari kod atau nama daerah mengundi...",className:"w-full pl-10 pr-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400"})]}),e.jsx("button",{type:"submit",className:"px-6 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:"Cari"}),d.search&&e.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Reset"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Bil"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Kod DM"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Nama Daerah Mengundi"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Parlimen"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Tindakan"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:t.data.length===0?e.jsx("tr",{children:e.jsxs("td",{colSpan:"5",className:"py-12 text-center",children:[e.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 rounded-full bg-slate-100 mb-4",children:e.jsx(N,{className:"h-8 w-8 text-slate-400"})}),e.jsx("p",{className:"text-slate-600",children:"Tiada daerah mengundi dijumpai"}),d.search&&e.jsx("button",{onClick:f,className:"mt-4 text-sky-600 hover:text-sky-700 text-sm font-medium",children:"Papar semua daerah mengundi"})]})}):t.data.map((s,x)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:t.from+x}),e.jsx("td",{className:"py-3 px-4 text-sm font-medium text-slate-900",children:s.kod_dm}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-900",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(N,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{children:s.nama})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:s.bandar?.nama||"-"}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>S(s),className:"p-2 text-slate-600 hover:text-sky-600 hover:bg-sky-50 rounded-lg transition-colors",children:e.jsx(I,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>_(s.id),className:"p-2 text-slate-600 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",children:e.jsx(q,{className:"h-4 w-4"})})]})})]},s.id))})]})}),t.links&&t.links.length>3&&e.jsx("div",{className:"border-t border-slate-200 px-6 py-4",children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("p",{className:"text-sm text-slate-600",children:["Menunjukkan ",t.from," hingga ",t.to," daripada ",t.total," rekod"]}),e.jsx("div",{className:"flex items-center space-x-2",children:t.links.map((s,x)=>e.jsx("button",{onClick:()=>s.url&&n.visit(s.url),disabled:!s.url,className:`px-3 py-1 rounded-lg text-sm transition-colors ${s.active?"bg-slate-900 text-white":s.url?"bg-slate-100 text-slate-700 hover:bg-slate-200":"bg-slate-50 text-slate-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},x))})]})})]})]}),e.jsx(E,{show:g,onClose:a,maxWidth:"md",children:e.jsxs("div",{className:"p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-6",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:l?"Edit Daerah Mengundi":"Tambah Daerah Mengundi"}),e.jsx("button",{onClick:a,className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(A,{className:"h-5 w-5 text-slate-600"})})]}),e.jsxs("form",{onSubmit:C,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Kod DM ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.kod_dm,onChange:s=>c("kod_dm",s.target.value),placeholder:"Contoh: 041/01/02",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0}),r.kod_dm&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:r.kod_dm})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Nama Daerah Mengundi ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:p.nama,onChange:s=>c("nama",s.target.value.toUpperCase()),placeholder:"Contoh: PULAU MERTAJAM",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400 uppercase",required:!0}),r.nama&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:r.nama})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:a,className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:b?"Menyimpan...":l?"Kemaskini":"Simpan"})]})]})]})})]})}export{O as default};
