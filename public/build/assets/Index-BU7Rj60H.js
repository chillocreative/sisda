import{r as d,j as e,H as j,b as h}from"./app-DnEYVMt0.js";import{A as g,U as f,M as b}from"./AuthenticatedLayout-BWvhvMOw.js";import{M as N}from"./Modal-DdbkHOuX.js";import{P as y}from"./PrimaryButton-Bm5DpglV.js";import{D as v}from"./DangerButton-B_GtteH0.js";import{S as k}from"./SecondaryButton-CWz3rRgD.js";import{C as w}from"./calendar-BCrfyJQC.js";import{C}from"./circle-check-big-BlrMZbb9.js";import{C as P}from"./circle-x-GOBRaZ62.js";import"./createLucideIcon-DH3QVtca.js";import"./phone-DpR_WuVZ.js";import"./transition-B5hON2T1.js";import"./with-selector-DwLHO4qH.js";import"./index-CR6xPDZk.js";function R({pendingUsers:a}){const[l,x]=d.useState(null),[s,c]=d.useState(null),[n,o]=d.useState(null),m=(t,r)=>{c(t),o(r)},i=()=>{c(null),o(null)},p=()=>{if(!s||!n)return;const t=s.id;x(t);const r=n==="approve"?"user-approval.approve":"user-approval.reject";h.post(route(r,t),{},{onFinish:()=>{x(null),i()}})},u=t=>new Date(t).toLocaleDateString("ms-MY",{year:"numeric",month:"long",day:"numeric"});return e.jsxs(g,{children:[e.jsx(j,{title:"Kelulusan Pengguna"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Kelulusan Pengguna"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Luluskan atau tolak pendaftaran pengguna baharu"})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden shadow-sm",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Nama"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Telefon"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Emel"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Peranan"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Kawasan"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Tarikh Daftar"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 uppercase w-48",children:"Tindakan"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:a.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"7",className:"py-8 text-center text-slate-500",children:"Tiada pengguna menunggu kelulusan"})}):a.data.map(t=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(f,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm font-medium text-slate-900",children:t.name})]})}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:t.telephone}),e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:t.email||"-"}),e.jsx("td",{className:"py-3 px-4",children:e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${t.role==="admin"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:t.role==="admin"?"Pentadbir":"Pengguna"})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-start space-x-1 text-xs text-slate-600",children:[e.jsx(b,{className:"h-3 w-3 text-slate-400 mt-0.5 flex-shrink-0"}),e.jsxs("div",{children:[e.jsx("div",{children:t.negeri?.nama}),e.jsx("div",{className:"text-slate-500",children:t.bandar?.nama}),e.jsx("div",{className:"text-slate-500",children:t.kadun?.nama})]})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-1 text-xs text-slate-600",children:[e.jsx(w,{className:"h-3 w-3 text-slate-400"}),e.jsx("span",{children:u(t.created_at)})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsxs("button",{onClick:()=>m(t,"approve"),disabled:l===t.id,className:"flex items-center space-x-1 px-3 py-1.5 bg-emerald-500 text-white text-sm rounded-lg hover:bg-emerald-600 transition-colors disabled:opacity-50",children:[e.jsx(C,{className:"h-4 w-4"}),e.jsx("span",{children:"Lulus"})]}),e.jsxs("button",{onClick:()=>m(t,"reject"),disabled:l===t.id,className:"flex items-center space-x-1 px-3 py-1.5 bg-rose-500 text-white text-sm rounded-lg hover:bg-rose-600 transition-colors disabled:opacity-50",children:[e.jsx(P,{className:"h-4 w-4"}),e.jsx("span",{children:"Tolak"})]})]})})]},t.id))})]})}),a.last_page>1&&e.jsxs("div",{className:"border-t border-slate-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Menunjukkan ",a.from," hingga ",a.to," daripada ",a.total," rekod"]}),e.jsx("div",{className:"flex items-center space-x-2",children:a.links.map((t,r)=>e.jsx("button",{onClick:()=>t.url&&h.get(t.url),disabled:!t.url,className:`px-3 py-1 rounded-lg text-sm transition-colors ${t.active?"bg-slate-900 text-white":t.url?"border border-slate-300 text-slate-700 hover:bg-slate-50":"border border-slate-200 text-slate-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:t.label}},r))})]})]})]}),e.jsx(N,{show:!!s,onClose:i,children:e.jsxs("div",{className:"p-6",children:[e.jsx("h2",{className:"text-lg font-medium text-slate-900",children:n==="approve"?"Luluskan Pengguna":"Tolak Pengguna"}),e.jsx("p",{className:"mt-1 text-sm text-slate-600",children:n==="approve"?`Adakah anda pasti mahu meluluskan pengguna ${s?.name}? Pengguna akan mendapat akses ke sistem.`:`Adakah anda pasti mahu menolak pengguna ${s?.name}? Pengguna tidak akan mendapat akses ke sistem.`}),e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[e.jsx(k,{onClick:i,children:"Batal"}),n==="approve"?e.jsx(y,{className:"bg-emerald-600 hover:bg-emerald-500 focus:ring-emerald-500",onClick:p,disabled:l===s?.id,children:l===s?.id?"Sedang Diproses...":"Luluskan Pengguna"}):e.jsx(v,{onClick:p,disabled:l===s?.id,children:l===s?.id?"Sedang Diproses...":"Tolak Pengguna"})]})]})})]})}export{R as default};
