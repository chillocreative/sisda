import{u as R,r as n,j as e,H as z,c as i}from"./app-B2jPE0RG.js";import{A as G}from"./AuthenticatedLayout-CqjbtEEH.js";import{A as J}from"./arrow-left-DDF9s43c.js";import"./createLucideIcon-DH7GAbzM.js";import"./phone-D_UhCvYJ.js";function te({bangsaList:w,negeriList:P,bandarList:Q,parlimenList:V,kadunList:W,daerahMengundiList:X,keahlianPartiList:D,kecenderunganPolitikList:M}){const{data:s,setData:l,post:_,processing:b,errors:t}=R({nama:"",no_ic:"",umur:"",no_tel:"",bangsa:"",alamat:"",poskod:"",negeri:"",bandar:"",parlimen:"",kadun:"",mpkk:"",daerah_mengundi:"",keahlian_parti:"",kecenderungan_politik:""}),[C,c]=n.useState([]),[K,f]=n.useState(!1),[q,u]=n.useState([]),[E,j]=n.useState(!1),[L,m]=n.useState([]),[O,k]=n.useState(!1),[S,x]=n.useState([]),[A,N]=n.useState(!1);n.useEffect(()=>{(async()=>{if(!s.negeri){c([]);return}f(!0);try{const r=await i.get(route("api.parlimen.by-negeri"),{params:{negeri:s.negeri}});c(r.data)}catch(r){console.error("Error fetching Parlimen:",r),c([])}finally{f(!1)}})()},[s.negeri]),n.useEffect(()=>{(async()=>{if(!s.parlimen){u([]);return}j(!0);try{const r=await i.get(route("api.kadun.by-bandar"),{params:{bandar:s.parlimen}});u(r.data)}catch(r){console.error("Error fetching KADUN:",r),u([])}finally{j(!1)}})()},[s.parlimen]),n.useEffect(()=>{(async()=>{if(!s.kadun){x([]);return}N(!0);try{const r=await i.get(route("api.mpkk.by-kadun"),{params:{kadun:s.kadun}});x(r.data)}catch(r){console.error("Error fetching MPKK:",r),x([])}finally{N(!1)}})()},[s.kadun]),n.useEffect(()=>{(async()=>{if(!s.parlimen){m([]);return}k(!0);try{const r=await i.get(route("api.daerah-mengundi.by-bandar"),{params:{bandar:s.parlimen}});m(r.data)}catch(r){console.error("Error fetching Daerah Mengundi:",r),m([])}finally{k(!1)}})()},[s.parlimen]);const I=a=>{const o=a.target.value.replace(/\D/g,"");if(o.length>12)return;if(l("no_ic",o),o.length<6){l("umur","");return}const p=o.substring(0,2),H=o.substring(2,4),F=o.substring(4,6),Y=parseInt(p)<=25?2e3+parseInt(p):1900+parseInt(p),h=new Date(Y,parseInt(H)-1,parseInt(F)),g=new Date;let d=g.getFullYear()-h.getFullYear();const y=g.getMonth()-h.getMonth();(y<0||y===0&&g.getDate()<h.getDate())&&d--,d>=0&&d<=150&&l("umur",d.toString())},T=a=>{const o=a.target.value.replace(/\D/g,"");l("no_tel",o)},v=(a,r)=>{l(a,r.toUpperCase())};n.useEffect(()=>{(async()=>{if(s.poskod.length===5)try{const r=await i.get(route("api.postcodes.search-details"),{params:{query:s.poskod}});if(r.data&&r.data.length>0){const o=r.data[0];l({...s,negeri:o.negeri_nama||"",bandar:o.city||"",parlimen:o.bandar_nama||""})}}catch(r){console.error("Error fetching postcode details:",r)}})()},[s.poskod]);const U=a=>{const r=a.target.value.replace(/\D/g,"");r.length<=5&&l("poskod",r)},B=a=>{a.preventDefault(),_(route("reports.data-pengundi.store"))};return e.jsxs(G,{children:[e.jsx(z,{title:"Tambah Data Pengundi"}),e.jsxs("div",{className:"max-w-4xl mx-auto space-y-6",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[e.jsx("button",{onClick:()=>window.history.back(),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(J,{className:"h-5 w-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Tambah Data Pengundi"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Isi semua maklumat yang diperlukan"})]})]}),e.jsxs("form",{onSubmit:B,className:"space-y-6",children:[e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Maklumat Peribadi"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Nama ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.nama,onChange:a=>v("nama",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400 uppercase",required:!0}),t.nama&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.nama})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["No. IC ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.no_ic,onChange:I,placeholder:"900101145678",maxLength:"12",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0}),t.no_ic&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.no_ic}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Hanya angka sahaja (contoh: 900101145678)"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Umur ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"number",value:s.umur,onChange:a=>l("umur",a.target.value),min:"1",max:"150",readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400 bg-slate-50",required:!0}),t.umur&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.umur}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Dikira automatik dari No. IC"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["No. Telefon ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"tel",value:s.no_tel,onChange:T,placeholder:"0123456789",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0}),t.no_tel&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.no_tel}),e.jsx("p",{className:"text-xs text-slate-500 mt-1",children:"Hanya angka sahaja"})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Bangsa ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:s.bangsa,onChange:a=>l("bangsa",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Bangsa"}),w.map(a=>e.jsx("option",{value:a.nama,children:a.nama},a.id))]}),t.bangsa&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.bangsa})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Maklumat Alamat"}),e.jsxs("div",{className:"grid grid-cols-1 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Alamat ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("textarea",{value:s.alamat,onChange:a=>v("alamat",a.target.value),rows:"3",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400 uppercase",required:!0}),t.alamat&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.alamat})]}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Poskod ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.poskod,onChange:U,placeholder:"00000",maxLength:"5",className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0}),t.poskod&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.poskod})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Negeri ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:s.negeri,onChange:a=>l("negeri",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0,children:[e.jsx("option",{value:"",children:"Pilih Negeri"}),P.map(a=>e.jsx("option",{value:a.nama,children:a.nama},a.id))]}),t.negeri&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.negeri})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Bandar ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:s.bandar,readOnly:!0,className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400 bg-slate-50",placeholder:"Pilih Poskod terlebih dahulu"}),t.bandar&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.bandar})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Parlimen ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:s.parlimen,onChange:a=>l("parlimen",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0,children:[e.jsx("option",{value:"",children:K?"Memuat...":"Pilih Parlimen"}),C.map(a=>e.jsx("option",{value:a.nama,children:a.nama},a.id))]}),t.parlimen&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.parlimen})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["KADUN ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:s.kadun,onChange:a=>l("kadun",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0,children:[e.jsx("option",{value:"",children:E?"Memuat...":"Pilih KADUN"}),q.map(a=>e.jsx("option",{value:a.nama,children:a.nama},a.id))]}),t.kadun&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.kadun})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["MPKK ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:s.mpkk,onChange:a=>l("mpkk",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0,children:[e.jsx("option",{value:"",children:A?"Memuat...":"Pilih MPKK"}),S.map(a=>e.jsx("option",{value:a.nama,children:a.nama},a.id))]}),t.mpkk&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.mpkk})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Daerah Mengundi ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:s.daerah_mengundi,onChange:a=>l("daerah_mengundi",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",required:!0,children:[e.jsx("option",{value:"",children:O?"Memuat...":"Pilih Daerah Mengundi"}),L.map(a=>e.jsx("option",{value:a.nama,children:a.nama},a.id))]}),t.daerah_mengundi&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.daerah_mengundi})]})]})]})]}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 p-6",children:[e.jsx("h2",{className:"text-lg font-semibold text-slate-900 mb-4",children:"Maklumat Politik"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Keahlian Parti"}),e.jsxs("select",{value:s.keahlian_parti,onChange:a=>l("keahlian_parti",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",children:[e.jsx("option",{value:"",children:"Pilih Keahlian Parti"}),D.map(a=>e.jsx("option",{value:a.nama,children:a.nama},a.id))]}),t.keahlian_parti&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.keahlian_parti})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Kecenderungan Politik"}),e.jsxs("select",{value:s.kecenderungan_politik,onChange:a=>l("kecenderungan_politik",a.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",children:[e.jsx("option",{value:"",children:"Pilih Kecenderungan Politik"}),M.map(a=>e.jsx("option",{value:a.nama,children:a.nama},a.id))]}),t.kecenderungan_politik&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:t.kecenderungan_politik})]})]})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pb-6",children:[e.jsx("button",{type:"button",onClick:()=>window.history.back(),className:"px-6 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:b,className:"px-6 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:b?"Menyimpan...":"Simpan"})]})]})]})]})}export{te as default};
