import{d as R,r as x,u as S,j as e,H as U,a as m}from"./app-oWYwsgPA.js";import{A as $,M as q,X as P}from"./AuthenticatedLayout-CcLVzMtM.js";import{P as z,T as L}from"./trash-2-DZVD8626.js";import{S as X}from"./search-DwPMLRVM.js";import{C as G}from"./check-CmjL0pZo.js";import{S as J}from"./square-pen-BMmzh2ai.js";import"./createLucideIcon-DeOx7ZWC.js";import"./phone-CceSVOJV.js";function ae({bandar:t,negeriList:u,selectedNegeri:l,filters:v}){const d=R().props.auth.user,[p,y]=x.useState(v.search||""),[h,w]=x.useState(v.negeri_id||""),[n,b]=x.useState(null),[B,i]=x.useState(!1),{data:j,setData:g,post:D,processing:_,errors:r,reset:f}=S({nama:"",kod_parlimen:"",negeri_id:l?.id||""}),{data:N,setData:c,put:E,processing:A,errors:k,reset:C}=S({nama:"",kod_parlimen:"",negeri_id:""}),M=s=>{s.preventDefault(),m.get(route("master-data.bandar.index"),{search:p,negeri_id:h},{preserveState:!0,preserveScroll:!0})},T=s=>{s.preventDefault(),D(route("master-data.bandar.store"),{onSuccess:()=>{f(),i(!1)}})},F=s=>{b(s.id),c({nama:s.nama,kod_parlimen:s.kod_parlimen||"",negeri_id:s.negeri_id})},I=(s,o)=>{s.preventDefault(),E(route("master-data.bandar.update",o),{onSuccess:()=>{C(),b(null)}})},K=s=>{confirm("Adakah anda pasti mahu memadam bandar ini?")&&m.delete(route("master-data.bandar.destroy",s))},H=()=>{b(null),C()};return e.jsxs($,{children:[e.jsx(U,{title:l?`Bandar - ${l.nama}`:"Bandar"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:"Bandar"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Urus senarai bandar/parlimen"})]}),d.role==="super_admin"&&e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(z,{className:"h-4 w-4"}),e.jsx("span",{children:"Tambah Bandar"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:e.jsx("form",{onSubmit:M,className:"space-y-3",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(X,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",value:p,onChange:s=>y(s.target.value),placeholder:"Cari bandar atau kod parlimen...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400"})]}),e.jsxs("select",{value:h,onChange:s=>w(s.target.value),className:"px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",children:[e.jsx("option",{value:"",children:"Semua Negeri"}),u.map(s=>e.jsx("option",{value:s.id,children:s.nama},s.id))]}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:"Cari"}),(p||h)&&e.jsx("button",{type:"button",onClick:()=>{y(""),w(""),m.get(route("master-data.bandar.index"))},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Reset"})]})})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase w-16",children:"Bil"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Nama Bandar"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Kod Parlimen"}),!l&&e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Negeri"}),d.role==="super_admin"&&e.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 uppercase w-32",children:"Tindakan"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:t.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:l?d.role==="super_admin"?"4":"3":d.role==="super_admin"?"5":"4",className:"py-8 text-center text-slate-500",children:"Tiada rekod dijumpai"})}):t.data.map((s,o)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:t.from+o}),e.jsxs("td",{className:"py-3 px-4",children:[n===s.id?e.jsx("input",{type:"text",value:N.nama,onChange:a=>c("nama",a.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",autoFocus:!0}):e.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.nama}),k.nama&&n===s.id&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:k.nama})]}),e.jsx("td",{className:"py-3 px-4",children:n===s.id?e.jsx("input",{type:"text",value:N.kod_parlimen,onChange:a=>c("kod_parlimen",a.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",placeholder:"Contoh: P001"}):e.jsx("span",{className:"text-sm text-slate-600",children:s.kod_parlimen||"-"})}),!l&&e.jsx("td",{className:"py-3 px-4",children:n===s.id?e.jsxs("select",{value:N.negeri_id,onChange:a=>c("negeri_id",a.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",children:[e.jsx("option",{value:"",children:"Pilih Negeri"}),u.map(a=>e.jsx("option",{value:a.id,children:a.nama},a.id))]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(q,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-600",children:s.negeri?.nama})]})}),d.role==="super_admin"&&e.jsx("td",{className:"py-3 px-4",children:n===s.id?e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:a=>I(a,s.id),disabled:A,className:"p-2 bg-emerald-500 text-white rounded-lg hover:bg-emerald-600 transition-colors disabled:opacity-50",title:"Simpan",children:e.jsx(G,{className:"h-4 w-4"})}),e.jsx("button",{onClick:H,className:"p-2 bg-slate-200 text-slate-600 rounded-lg hover:bg-slate-300 transition-colors",title:"Batal",children:e.jsx(P,{className:"h-4 w-4"})})]}):e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>F(s),className:"p-2 bg-amber-400 text-white rounded-lg hover:bg-amber-500 transition-colors",title:"Kemaskini",children:e.jsx(J,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>K(s.id),className:"p-2 bg-rose-500 text-white rounded-lg hover:bg-rose-600 transition-colors",title:"Padam",children:e.jsx(L,{className:"h-4 w-4"})})]})})]},s.id))})]})}),t.last_page>1&&e.jsxs("div",{className:"border-t border-slate-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Menunjukkan ",t.from," hingga ",t.to," daripada ",t.total," rekod"]}),e.jsx("div",{className:"flex items-center space-x-2",children:t.links.map((s,o)=>e.jsx("button",{onClick:()=>s.url&&m.get(s.url),disabled:!s.url,className:`px-3 py-1 rounded-lg text-sm transition-colors ${s.active?"bg-slate-900 text-white":s.url?"border border-slate-300 text-slate-700 hover:bg-slate-50":"border border-slate-200 text-slate-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},o))})]})]})]}),B&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Tambah Bandar"}),e.jsx("button",{onClick:()=>{i(!1),f()},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(P,{className:"h-5 w-5 text-slate-600"})})]}),e.jsxs("form",{onSubmit:T,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Nama Bandar ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:j.nama,onChange:s=>g("nama",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",placeholder:"Contoh: Kuala Lumpur",autoFocus:!0}),r.nama&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:r.nama})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Kod Parlimen"}),e.jsx("input",{type:"text",value:j.kod_parlimen,onChange:s=>g("kod_parlimen",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",placeholder:"Contoh: P001"}),r.kod_parlimen&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:r.kod_parlimen})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Negeri ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:j.negeri_id,onChange:s=>g("negeri_id",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",children:[e.jsx("option",{value:"",children:"Pilih Negeri"}),u.map(s=>e.jsx("option",{value:s.id,children:s.nama},s.id))]}),r.negeri_id&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:r.negeri_id})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),f()},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:_,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:_?"Menyimpan...":"Simpan"})]})]})]})})]})}export{ae as default};
