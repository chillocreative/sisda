import{r as j,u as w,j as e,H as M,a as o}from"./app-DR_Ni3Zk.js";import{A as I,h as F,M as H,X as $}from"./AuthenticatedLayout-CnA8l45M.js";import{A as L}from"./arrow-left-DxY737gV.js";import{P as R,T as q}from"./trash-2-P3Tud11i.js";import{S as z}from"./search-6AEvtseE.js";import{S as X}from"./square-pen-CcZNTLY1.js";import"./createLucideIcon-skLxG6U9.js";import"./phone-DoBqAsqR.js";function B({kadun:l,bandarList:N,selectedBandar:a,filters:k}){const[x,f]=j.useState(k.search||""),[n,m]=j.useState(null),[_,i]=j.useState(!1),{data:u,setData:p,post:D,processing:g,errors:d,reset:h}=w({nama:"",kod_dun:"",bandar_id:a?.id||""}),{data:b,setData:c,put:C,processing:S,errors:v,reset:y}=w({nama:"",kod_dun:"",bandar_id:""}),A=s=>{s.preventDefault();const r=a?route("master-data.kadun.filter",a.id):route("master-data.kadun.index");o.get(r,{search:x},{preserveState:!0,preserveScroll:!0})},U=s=>{s.preventDefault(),D(route("master-data.kadun.store"),{onSuccess:()=>{h(),i(!1)}})},K=s=>{m(s.id),c({nama:s.nama,kod_dun:s.kod_dun||"",bandar_id:s.bandar_id})},P=(s,r)=>{s.preventDefault(),C(route("master-data.kadun.update",r),{onSuccess:()=>{y(),m(null)}})},E=s=>{confirm("Adakah anda pasti mahu memadam KADUN ini?")&&o.delete(route("master-data.kadun.destroy",s))},T=()=>{m(null),y()};return e.jsxs(I,{children:[e.jsx(M,{title:a?`KADUN - ${a.nama}`:"KADUN"}),e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{className:"flex items-center space-x-4",children:[a&&e.jsx("button",{onClick:()=>o.get(route("master-data.bandar.index",a.negeri_id)),className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx(L,{className:"h-5 w-5 text-slate-600"})}),e.jsxs("div",{children:[e.jsx("h1",{className:"text-2xl font-bold text-slate-900",children:a?`KADUN - ${a.nama}`:"Semua KADUN"}),e.jsx("p",{className:"text-sm text-slate-600 mt-1",children:"Urus senarai Kawasan Dewan Undangan Negeri"})]})]}),e.jsxs("button",{onClick:()=>i(!0),className:"flex items-center space-x-2 px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:[e.jsx(R,{className:"h-4 w-4"}),e.jsx("span",{children:"Tambah KADUN"})]})]}),e.jsx("div",{className:"bg-white rounded-xl border border-slate-200 p-4",children:e.jsxs("form",{onSubmit:A,className:"flex items-center space-x-2",children:[e.jsxs("div",{className:"relative flex-1",children:[e.jsx(z,{className:"absolute left-3 top-1/2 -translate-y-1/2 h-4 w-4 text-slate-400"}),e.jsx("input",{type:"text",value:x,onChange:s=>f(s.target.value),placeholder:"Cari KADUN atau kod DUN...",className:"w-full pl-10 pr-4 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400"})]}),e.jsx("button",{type:"submit",className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors",children:"Cari"}),x&&e.jsx("button",{type:"button",onClick:()=>{f("");const s=a?route("master-data.kadun.filter",a.id):route("master-data.kadun.index");o.get(s)},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Reset"})]})}),e.jsxs("div",{className:"bg-white rounded-xl border border-slate-200 overflow-hidden",children:[e.jsx("div",{className:"overflow-x-auto",children:e.jsxs("table",{className:"w-full",children:[e.jsx("thead",{className:"bg-slate-50 border-b border-slate-200",children:e.jsxs("tr",{children:[e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase w-16",children:"Bil"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Nama KADUN"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Kod DUN"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Parlimen (Bandar)"}),e.jsx("th",{className:"text-left py-3 px-4 text-xs font-semibold text-slate-600 uppercase",children:"Negeri"}),e.jsx("th",{className:"text-right py-3 px-4 text-xs font-semibold text-slate-600 uppercase w-32",children:"Tindakan"})]})}),e.jsx("tbody",{className:"divide-y divide-slate-100",children:l.data.length===0?e.jsx("tr",{children:e.jsx("td",{colSpan:"6",className:"py-8 text-center text-slate-500",children:"Tiada rekod dijumpai"})}):l.data.map((s,r)=>e.jsxs("tr",{className:"hover:bg-slate-50 transition-colors",children:[e.jsx("td",{className:"py-3 px-4 text-sm text-slate-600",children:l.from+r}),e.jsxs("td",{className:"py-3 px-4",children:[n===s.id?e.jsx("input",{type:"text",value:b.nama,onChange:t=>c("nama",t.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",autoFocus:!0}):e.jsx("span",{className:"text-sm font-medium text-slate-900",children:s.nama}),v.nama&&n===s.id&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:v.nama})]}),e.jsx("td",{className:"py-3 px-4",children:n===s.id?e.jsx("input",{type:"text",value:b.kod_dun,onChange:t=>c("kod_dun",t.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",placeholder:"Contoh: N01"}):e.jsx("span",{className:"text-sm text-slate-600",children:s.kod_dun||"-"})}),e.jsx("td",{className:"py-3 px-4",children:n===s.id?e.jsxs("select",{value:b.bandar_id,onChange:t=>c("bandar_id",t.target.value),className:"w-full px-3 py-1.5 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",children:[e.jsx("option",{value:"",children:"Pilih Parlimen"}),N.map(t=>e.jsxs("option",{value:t.id,children:[t.nama," (",t.negeri?.nama,")"]},t.id))]}):e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(F,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-600",children:s.bandar?.nama})]})}),e.jsx("td",{className:"py-3 px-4",children:e.jsxs("div",{className:"flex items-center space-x-2",children:[e.jsx(H,{className:"h-4 w-4 text-slate-400"}),e.jsx("span",{className:"text-sm text-slate-600",children:s.bandar?.negeri?.nama})]})}),e.jsx("td",{className:"py-3 px-4",children:n===s.id?e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:t=>P(t,s.id),disabled:S,className:"px-3 py-1.5 bg-emerald-600 text-white text-sm rounded-lg hover:bg-emerald-700 transition-colors disabled:opacity-50",children:"Simpan"}),e.jsx("button",{onClick:T,className:"px-3 py-1.5 border border-slate-300 text-slate-700 text-sm rounded-lg hover:bg-slate-50 transition-colors",children:"Batal"})]}):e.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[e.jsx("button",{onClick:()=>K(s),className:"p-2 text-slate-600 hover:text-sky-600 hover:bg-sky-50 rounded-lg transition-colors",children:e.jsx(X,{className:"h-4 w-4"})}),e.jsx("button",{onClick:()=>E(s.id),className:"p-2 text-slate-600 hover:text-rose-600 hover:bg-rose-50 rounded-lg transition-colors",children:e.jsx(q,{className:"h-4 w-4"})})]})})]},s.id))})]})}),l.last_page>1&&e.jsxs("div",{className:"border-t border-slate-200 px-4 py-3 flex items-center justify-between",children:[e.jsxs("div",{className:"text-sm text-slate-600",children:["Menunjukkan ",l.from," hingga ",l.to," daripada ",l.total," rekod"]}),e.jsx("div",{className:"flex items-center space-x-2",children:l.links.map((s,r)=>e.jsx("button",{onClick:()=>s.url&&o.get(s.url),disabled:!s.url,className:`px-3 py-1 rounded-lg text-sm transition-colors ${s.active?"bg-slate-900 text-white":s.url?"border border-slate-300 text-slate-700 hover:bg-slate-50":"border border-slate-200 text-slate-400 cursor-not-allowed"}`,dangerouslySetInnerHTML:{__html:s.label}},r))})]})]})]}),_&&e.jsx("div",{className:"fixed inset-0 bg-black/50 flex items-center justify-center z-50 p-4",children:e.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[e.jsxs("div",{className:"flex items-center justify-between mb-4",children:[e.jsx("h2",{className:"text-xl font-bold text-slate-900",children:"Tambah KADUN"}),e.jsx("button",{onClick:()=>{i(!1),h()},className:"p-2 hover:bg-slate-100 rounded-lg transition-colors",children:e.jsx($,{className:"h-5 w-5 text-slate-600"})})]}),e.jsxs("form",{onSubmit:U,className:"space-y-4",children:[e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Nama KADUN ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsx("input",{type:"text",value:u.nama,onChange:s=>p("nama",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",placeholder:"Contoh: Sungai Tua",autoFocus:!0}),d.nama&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:d.nama})]}),e.jsxs("div",{children:[e.jsx("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:"Kod DUN"}),e.jsx("input",{type:"text",value:u.kod_dun,onChange:s=>p("kod_dun",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",placeholder:"Contoh: N16"}),d.kod_dun&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:d.kod_dun})]}),e.jsxs("div",{children:[e.jsxs("label",{className:"block text-sm font-medium text-slate-700 mb-1",children:["Parlimen (Bandar) ",e.jsx("span",{className:"text-rose-500",children:"*"})]}),e.jsxs("select",{value:u.bandar_id,onChange:s=>p("bandar_id",s.target.value),className:"w-full px-3 py-2 border border-slate-300 rounded-lg focus:ring-2 focus:ring-slate-400 focus:border-slate-400",children:[e.jsx("option",{value:"",children:"Pilih Parlimen"}),N.map(s=>e.jsxs("option",{value:s.id,children:[s.nama," (",s.negeri?.nama,")"]},s.id))]}),d.bandar_id&&e.jsx("p",{className:"text-sm text-rose-600 mt-1",children:d.bandar_id})]}),e.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[e.jsx("button",{type:"button",onClick:()=>{i(!1),h()},className:"px-4 py-2 border border-slate-300 text-slate-700 rounded-lg hover:bg-slate-50 transition-colors",children:"Batal"}),e.jsx("button",{type:"submit",disabled:g,className:"px-4 py-2 bg-slate-900 text-white rounded-lg hover:bg-slate-800 transition-colors disabled:opacity-50",children:g?"Menyimpan...":"Simpan"})]})]})]})})]})}export{B as default};
